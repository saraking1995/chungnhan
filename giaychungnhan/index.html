<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chứng Nhận Hoàn Thành Xuất Sắc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CSS giữ nguyên như cũ */
    </style>
</head>
<body class="certificate-bg min-h-screen flex items-center justify-center p-4">
    <div id="certificateContent" class="hidden w-full max-w-5xl">
        </div>
    <div id="loadingState" class="text-center text-gray-700">
        <p class="text-xl">Đang tải chứng nhận...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // LẤY DỮ LIỆU ĐÃ MÃ HÓA TỪ URL HASH
            const encodedData = window.location.hash.substring(1);

            if (!encodedData) {
                document.getElementById('loadingState').innerHTML = '<h2 class="text-2xl text-red-500">Lỗi: Không tìm thấy dữ liệu.</h2>';
                return;
            }

            try {
                // GIẢI MÃ DỮ LIỆU BASE64 VÀ CHUYỂN VỀ ĐỐI TƯỢNG (OBJECT)
                const decodedDataString = decodeURIComponent(escape(atob(encodedData)));
                const data = JSON.parse(decodedDataString);

                // HIỂN THỊ DỮ LIỆU (logic giống như cũ)
                const monthDate = new Date(data.month + '-02');
                document.getElementById('displayMonth').textContent = 'tháng ' + String(monthDate.getMonth() + 1).padStart(2, '0') + ' năm ' + monthDate.getFullYear();
                document.getElementById('displayName').innerHTML = data.names.length === 1 ? `đồng chí ${data.names[0]}` : `các đồng chí có tên sau: <br><span class="font-normal">${data.names.join(', ')}</span>`;
                // ... điền các thông tin khác ...
                
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('certificateContent').classList.remove('hidden');

            } catch (error) {
                console.error("Lỗi giải mã dữ liệu:", error);
                document.getElementById('loadingState').innerHTML = '<h2 class="text-2xl text-red-500">Lỗi: Dữ liệu chứng nhận không hợp lệ.</h2>';
            }
        });

        function goToForm() {
            window.location.href = '../index.html';
        }
    </script>
</body>
</html>
