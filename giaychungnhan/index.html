<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chứng Nhận Hoàn Thành Xuất Sắc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .certificate-bg { background: linear-gradient(135deg, #f0f4f9 0%, #d9e2ec 100%); }
        .gold-border { background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700); padding: 4px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .certificate-inner { background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 12px; border: 1px solid #e2e8f0; }
        @media print { body, .certificate-bg { background: white !important; -webkit-print-color-adjust: exact; color-adjust: exact; } .no-print { display: none !important; } .certificate-container, .gold-border { box-shadow: none !important; } }
    </style>
</head>
<body class="certificate-bg min-h-screen flex items-center justify-center p-4">
    <div id="certificateContent" class="hidden w-full max-w-5xl certificate-container">
        <div class="gold-border">
            <div class="certificate-inner p-10 relative overflow-hidden">
                <div class="text-center mb-6">
                    <h1 class="text-2xl font-bold text-red-700" style="font-family: 'Playfair Display', serif;">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h1>
                    <p class="text-lg font-semibold text-red-600 tracking-widest">Độc lập - Tự do - Hạnh phúc</p>
                    <div class="w-32 h-px bg-yellow-500 mx-auto mt-2 mb-6"></div>
                </div>
                <div class="text-center mb-8">
                    <h2 class="text-5xl font-bold text-blue-800 mb-2" style="font-family: 'Playfair Display', serif;">CHỨNG NHẬN</h2>
                    <h3 class="text-2xl font-semibold text-blue-700">HOÀN THÀNH XUẤT SẮC NHIỆM VỤ</h3>
                </div>
                <div class="text-center mb-8">
                    <p class="text-lg text-gray-700 mb-2">Trân trọng trao tặng:</p>
                    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4">
                        <h4 id="displayName" class="text-3xl font-bold text-blue-800" style="font-family: 'Playfair Display', serif;"></h4>
                    </div>
                    <p id="displayUnit" class="font-semibold text-gray-800"></p>
                </div>
                <div class="text-center mb-8">
                    <p class="text-lg text-gray-700 leading-relaxed">Đã hoàn thành xuất sắc nhiệm vụ được giao trong <span id="displayMonth" class="font-bold text-blue-800"></span>, với những thành tích nổi bật:</p>
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
                        <p id="displayAchievements" class="text-gray-700 text-left whitespace-pre-line"></p>
                    </div>
                </div>
                <div class="flex justify-end mt-12">
                    <div class="text-center">
                        <p id="displayDate" class="font-semibold text-gray-800 mb-2"></p>
                        <p class="font-bold text-gray-700 mb-12">LÃNH ĐẠO ĐƠN VỊ</p>
                        <p id="displayPresenter" class="font-bold text-gray-800"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex justify-center space-x-4 mt-8 no-print">
            <button onclick="window.print()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-lg">In chứng nhận</button>
            <button onclick="goToForm()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg">Tạo chứng nhận mới</button>
        </div>
    </div>
    <div id="loadingState" class="text-center text-gray-700">
        <p class="text-xl">Đang tải chứng nhận...</p>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const requiredParams = ['names', 'month', 'achievements'];
            if (requiredParams.some(p => !urlParams.has(p) || urlParams.get(p) === '')) {
                document.getElementById('loadingState').innerHTML = '<h2 class="text-2xl font-bold mb-4 text-red-500">Lỗi: Thiếu thông tin. Vui lòng tạo lại từ trang chủ.</h2>';
                return;
            }

            const data = {
                names: urlParams.get('names').split('|'),
                unit: urlParams.get('unit') || 'Đơn vị công tác',
                month: urlParams.get('month'),
                achievements: urlParams.get('achievements'),
                presenter: urlParams.get('presenter') || 'Lãnh đạo đơn vị'
            };

            const monthDate = new Date(data.month + '-02');
            document.getElementById('displayMonth').textContent = 'tháng ' + String(monthDate.getMonth() + 1).padStart(2, '0') + ' năm ' + monthDate.getFullYear();

            document.getElementById('displayName').innerHTML = data.names.length === 1 ? `đồng chí ${data.names[0]}` : `các đồng chí có tên sau: <br><span class="font-normal">${data.names.join(', ')}</span>`;
            document.getElementById('displayUnit').textContent = data.unit;
            document.getElementById('displayAchievements').textContent = data.achievements;
            document.getElementById('displayPresenter').textContent = data.presenter;
            
            const today = new Date();
            document.getElementById('displayDate').textContent = `Ngày ${String(today.getDate()).padStart(2, '0')}, tháng ${String(today.getMonth() + 1).padStart(2, '0')}, năm ${today.getFullYear()}`;

            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('certificateContent').classList.remove('hidden');
        });

        function goToForm() {
            // ĐÃ CẬP NHẬT ĐỂ TRỎ VỀ ĐÚNG TRANG CHỦ
            window.location.href = '../index.html';
        }
    </script>
</body>
</html>

